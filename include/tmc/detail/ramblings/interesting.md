With private handoff + last-resort inbox stealing:
PRODUCER local: 0 distant: 0  |  push tids: 500000 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
PRODUCER local: 0 distant: 0  |  push tids: 0 0 0 0 500000 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 3324 distant: 6201  |  succeeded: 120 suspended: 99610  |  pull tids: 0 0 24714 23404 0 0 0 0 26315 0 0 25298 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 3168 distant: 6121  |  succeeded: 152 suspended: 99395  |  pull tids: 0 0 23825 22756 0 0 0 0 26212 0 0 26755 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 3284 distant: 6261  |  succeeded: 67 suspended: 99767  |  pull tids: 0 0 24188 24785 0 0 0 0 25330 0 0 25532 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 3400 distant: 6349  |  succeeded: 139 suspended: 99978  |  pull tids: 0 0 23513 24147 0 0 0 0 25598 0 0 26860 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 3133 distant: 6079  |  succeeded: 242 suspended: 99279  |  pull tids: 0 0 23109 23482 0 0 0 0 25944 0 0 26987 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 3454 distant: 6523  |  succeeded: 21 suspended: 100212  |  pull tids: 0 0 23581 25147 0 0 0 0 25440 0 0 26066 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 3130 distant: 6043  |  succeeded: 265 suspended: 99396  |  pull tids: 0 0 24637 23319 0 0 0 0 25712 0 0 25994 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 3383 distant: 6306  |  succeeded: 480 suspended: 99914  |  pull tids: 0 0 24057 25194 0 0 0 0 25643 0 0 25501 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 3070 distant: 5974  |  succeeded: 38 suspended: 99261  |  pull tids: 0 0 23659 23075 0 0 0 0 26016 0 0 26550 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 3298 distant: 6089  |  succeeded: 2062 suspended: 99602  |  pull tids: 0 0 24588 24754 0 0 0 0 25801 0 0 26522 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
2 prod  10 cons  369453 us
➜  clang-linux-release git:(new_primitives) ✗ /home/tzcnt/github/tmc-examples/build/clang-linux-release/queue
PRODUCER local: 0 distant: 0  |  push tids: 500000 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
PRODUCER local: 0 distant: 0  |  push tids: 0 0 0 0 0 0 0 0 0 0 0 0 0 500000 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 0 distant: 0  |  succeeded: 1153 suspended: 99805  |  pull tids: 0 0 0 0 0 0 100959 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 0 distant: 0  |  succeeded: 1070 suspended: 96314  |  pull tids: 0 0 0 0 0 0 0 97385 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 0 distant: 0  |  succeeded: 781 suspended: 97500  |  pull tids: 0 0 0 0 0 98282 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 0 distant: 0  |  succeeded: 982 suspended: 100120  |  pull tids: 0 0 0 0 101103 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 0 distant: 0  |  succeeded: 1813 suspended: 101527  |  pull tids: 0 0 0 103341 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 0 distant: 0  |  succeeded: 1187 suspended: 101157  |  pull tids: 0 102345 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 0 distant: 0  |  succeeded: 1532 suspended: 101131  |  pull tids: 0 0 102664 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 0 distant: 0  |  succeeded: 919 suspended: 96927  |  pull tids: 0 0 0 0 0 0 0 0 0 0 97847 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 0 distant: 0  |  succeeded: 920 suspended: 97521  |  pull tids: 0 0 0 0 0 0 0 0 0 0 0 98442 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
CONSUMER local: 0 distant: 0  |  succeeded: 940 suspended: 96701  |  pull tids: 0 0 0 0 0 0 0 0 97642 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
2 prod  10 cons  759065 us